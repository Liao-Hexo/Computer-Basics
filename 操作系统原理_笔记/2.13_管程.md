## 为什么要引入管程

信号量机制存在的问题：编写程序困难，易出错

能不能设计一种机制，让程序员写程序时不需要再关注复杂的PV操作，让写代码更轻松呢？

1973年，Brinch Hansen首次在程序设计语言（Pascal）中引入了“管程”成分：一种高级同步机制

## 管程的定义和基本特征

管程是一种特殊的软件模块，有这些部分组成：

1. 局部于管程的共享数据结构说明
2. 对该数据结构进行操作的一组过程（过程其实就是“函数”）
3. 对局部于管程的共享数据设置初始值的语句
4. 管程有一个名字

管程的基本特征：

1. 局部于管程的数据只能被局部于管程的过程所访问
2. 一个进程只有通过调用管程内的过程才能进入管程访问共享数据
3. 每次仅允许一个进程在管程内执行某个内部过程

## 用管程解决生产者消费者问题

每次仅允许一个进程在管程内执行某个内部过程：

![](https://tva1.sinaimg.cn/large/008i3skNly1gr7k7bsyymj30g80es454.jpg)

![](https://tva1.sinaimg.cn/large/008i3skNly1gr7kbuudt7j30c00bcmzu.jpg)

![](https://tva1.sinaimg.cn/large/008i3skNly1gr7kkxz0emj30u80f4dtr.jpg)

