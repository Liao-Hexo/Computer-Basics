## 什么是进程通信

顾名思义，进程通信就是指进程之间的信息交换

进程是分配系统资源的单位（包括内存地址空间），因此各进程拥有的内存地址空间相互独立，为了保证安全，一个进程不能直接访问另一个进程的地址空间，但是进程之间的信息交换又是必须实现的。为了保证进程间的安全通信，操作系统提供了一些方法

## 共享存储

### 基于数据结构的共享、基于存储区的共享

![](https://tva1.sinaimg.cn/large/008i3skNly1gr3y1yuhssj30wa0eek1i.jpg)

## 消息传递

进程间的数据交换以结构化的消息为单位，进程通过操作系统提供的“发送消息/接收消息”两个原语进行数据交换

![](https://tva1.sinaimg.cn/large/008i3skNly1gr3yl5ld92j30g005owht.jpg)

### 直接通信方式

发送进程要发送的消息直接挂到接收进程的消息缓冲队列上（通过发送消息/接收消息原语）

### 间接通信方式

消息要先发送到中间实体（信箱）中，因此也称“信箱通信方式”（计网中的电子邮件系统）

## 管道通信

“管道”是指用于连接读写进程的一个共享文件，又名pipe文件。其实就是在内存中开辟一个大小固定的缓冲区

![](https://tva1.sinaimg.cn/large/008i3skNly1gr3y9wdumfj30sa060goi.jpg)

- 管道只能采用半双工通信，某一时间段内只能实现单向的传输。如果要实现双向同时通信，则需要设置两个管道
- 各进程要互斥的访问管道
- 数据以字符流的形式写入管道，当管道写满时，写进程的write()系统调用将被阻塞，等待读进程将数据取走。当读进程将数据全部取走后，管道变空，此时读进程的read()系统调用将被阻塞
- 如果没写满，就不允许读。如果没读空，就不允许写
- 数据一旦被读出，就从管道中被抛弃，这就意味着读进程最多只能有一个，否则可能会有读错数据的情况